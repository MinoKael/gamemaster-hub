import{d as G,r as A,c as w,a as _,p as E,I as J,m as K,b as Q,e as W,f as Z,g as ee,h as te,i as O,u as ne,t as F,j as ae,k as ie,l as oe,n as le,o as re,q as H,s as se,v as m,M as de,w as ue,x as ce,y as N,V as U,z as me,A as fe,B as x,C as q,D as k,E as P,F as r,G as B,H as z,J as I,K as S,L as M,N as ve,O as R,P as T,Q as ge,R as $}from"./index.d9a411a8.js";import{m as ye,c as pe,f as ke,V as be,a as he,b as j}from"./VTextField.fb40d654.js";let D;const xe=new Uint8Array(16);function Ve(){if(!D&&(D=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!D))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return D(xe)}const g=[];for(let e=0;e<256;++e)g.push((e+256).toString(16).slice(1));function Ce(e,t=0){return g[e[t+0]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]]}const Se=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),L={randomUUID:Se};function Re(e,t,f){if(L.randomUUID&&!t&&!e)return L.randomUUID();e=e||{};const s=e.random||(e.rng||Ve)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){f=f||0;for(let d=0;d<16;++d)t[f+d]=s[d];return t}return Ce(s)}const qe=[{name:"d2",icon:"mdi-dice-2",quantity:0,keepModifier:""},{name:"d4",icon:"mdi-dice-d4",quantity:0,keepModifier:""},{name:"d6",icon:"mdi-dice-d6",quantity:0,keepModifier:""},{name:"d8",icon:"mdi-dice-d8",quantity:0,keepModifier:""},{name:"d10",icon:"mdi-dice-d10",quantity:0,keepModifier:""},{name:"d12",icon:"mdi-dice-d12",quantity:0,keepModifier:""},{name:"d20",icon:"mdi-dice-d20",quantity:0,keepModifier:""},{name:"d100",icon:"mdi-dice-multiple",quantity:0,keepModifier:""}],De=G("dices",()=>{const e=A([...qe]);function t(){e.forEach((o,l)=>{e[l].quantity=0,e[l].keepModifier=""}),s.value=""}const f=w(()=>e.filter(o=>o.quantity>0).map(o=>`${o.quantity}${o.name}${o.keepModifier}`).join("+")),s=_(""),d=w(()=>{let o=f.value.length>0&&s.value.length>0&&s.value[0]!=="+"&&s.value[0]!=="-"?"+":"";return(f.value+o+s.value).replaceAll(" ","")});function b(o,l=!1){l?o.quantity=Math.max(0,o.quantity--):o.quantity++}function p(o,l){let y=e.find(c=>c.name==="d20");y.quantity=l!=null?y.quantity>0?y.quantity:2:0,y.keepModifier=l!=null?o:""}return{dices:e,adicionais:s,computedString:d,resetDices:t,clickDice:b,clickKeepModifiers:p}});const _e=E({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:J,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...K(),...Q({location:"top end"}),...W(),...Z(),...ee(),...te({transition:"scale-rotate-transition"})},"VBadge"),Be=O()({name:"VBadge",inheritAttrs:!1,props:_e(),setup(e,t){const{backgroundColorClasses:f,backgroundColorStyles:s}=ne(F(e,"color")),{roundedClasses:d}=ae(e),{t:b}=ie(),{textColorClasses:p,textColorStyles:o}=oe(F(e,"textColor")),{themeClasses:l}=le(),{locationStyles:y}=re(e,!0,c=>{var h,i;return(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(c)?+((h=e.offsetY)!=null?h:0):["left","right"].includes(c)?+((i=e.offsetX)!=null?i:0):0)});return H(()=>{const c=Number(e.content),V=!e.max||isNaN(c)?e.content:c<=+e.max?c:`${e.max}+`,[h,i]=se(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return m(e.tag,N({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},i,{style:e.style}),{default:()=>{var a,n;return[m("div",{class:"v-badge__wrapper"},[(n=(a=t.slots).default)==null?void 0:n.call(a),m(de,{transition:e.transition},{default:()=>{var u,v;return[ue(m("span",N({class:["v-badge__badge",l.value,f.value,d.value,p.value],style:[s.value,o.value,e.inline?{}:y.value],"aria-atomic":"true","aria-label":b(e.label,c),"aria-live":"polite",role:"status"},h),[e.dot?void 0:t.slots.badge?(v=(u=t.slots).badge)==null?void 0:v.call(u):e.icon?m(U,{icon:e.icon},null):V]),[[ce,e.modelValue]])]}})])]}})}),{}}}),Me=E({...K(),...ye()},"VForm"),$e=O()({name:"VForm",props:Me(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:f,emit:s}=t;const d=pe(e),b=_();function p(l){l.preventDefault(),d.reset()}function o(l){const y=l,c=d.validate();y.then=c.then.bind(c),y.catch=c.catch.bind(c),y.finally=c.finally.bind(c),s("submit",y),y.defaultPrevented||c.then(V=>{var i;let{valid:h}=V;h&&((i=b.value)==null||i.submit())}),y.preventDefault()}return H(()=>{var l;return m("form",{ref:b,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:p,onSubmit:o},[(l=f.default)==null?void 0:l.call(f,d)])}),ke(d,b)}}),we={__name:"DiceBox",setup(e){const t=De(),f=A([]),s=_(null),d=_(null),b=w(()=>f.toReversed()),{mdAndUp:p}=me(),o={maxRoll:/\d{4,}d/g,validate:/\d?d[+-]?\b|[+-]d\d+?\b|[+-]{2,}\b/g,terms:/\d+d\d+(k[hl])?|[+-]|\d+/g,input:/[^0-9+\-dkhl]/g},l={maxRoll:i=>!o.maxRoll.test(i)||"O n\xFAmero m\xE1ximo de dados \xE9 999. Por favor, insira um n\xFAmero menor.",validate:i=>!o.validate.test(i)||'F\xF3rmula de dados inv\xE1lida. Utilize o formato "NdL", onde N \xE9 o n\xFAmero de dados e L \xE9 o n\xFAmero de lados.',required:i=>!!i||"Campo Obrigat\xF3rio!",input:i=>!o.input.test(i)||"Os \xFAnicos caracteres aceitos s\xE3o 0-9, +, -, d, k, l!"};function y(){t.resetDices(),d.value=null,s.value.resetValidation(),f.splice(0)}fe(t.dices,i=>{i.find(a=>a.name==="d20").quantity==0&&(d.value=null)});async function c(){const{valid:i}=await s.value.validate();if(i==!0){const a=h(t.computedString);f.push(a)}}function V(i){const[a,n]=i.split("d").map(v=>v.split(/kh|kl/g)[0]);let u=[];for(let v=0;v<a;v++)u.push(Math.floor(Math.random()*parseInt(n))+1);return u.sort((v,C)=>{switch(d.value){case 1:return v-C;case 0:default:return C-v}})}function h(i){const a=i.match(o.terms),n=a.map(u=>u.includes("d")?V(u):u==="+"||u==="-"?u:parseInt(u));return{id:Re(),formula:`[ ${a.join(" ")} ]`,rolagem:`[ ${n.join(" ")} ]`,total:n.reduce((u,v,C)=>typeof v=="number"?C===0||n[C-1]==="+"?u+parseInt(v):u-parseInt(v):typeof v=="object"?u+(a[C].includes("k")?v[0]:v.reduce((X,Y)=>X+Y,0)):u,0)}}return(i,a)=>(x(),q(P,{class:"text-center d-flex justify-center",height:"100%",elevation:0,variant:"text","max-width":"1000px"},{default:k(()=>[m(be,{align:"center"},{default:k(()=>[m(P,{class:"my-4 d-flex flex-column-reverse overflow-y-auto","max-height":r(p)?270:180,height:r(p)?280:200},{default:k(()=>[(x(!0),B(z,null,I(b.value,n=>(x(),B("div",{class:"pa-0 font-weight-bold text-subtitle-1",height:"fit-content",key:n.id},[S("div",null,[S("code",null,M(`F\xF3rmula: ${n.formula}`),1)]),S("div",null,[S("code",null,M(`Rolagem: ${n.rolagem}`),1)]),S("div",null,[S("code",null,M(`Total: ${n.total}`),1)]),m(he,{thickness:4})]))),128))]),_:1},8,["max-height","height"]),m(ve,{"no-gutters":"",class:"mb-3",justify:"center"},{default:k(()=>[(x(!0),B(z,null,I(r(t).dices,n=>(x(),q(R,{size:r(p)?100:75,rounded:"circle",ripple:!1,variant:"outlined",class:"ma-1",onClick:[u=>r(t).clickDice(n),T(u=>r(t).clickDice(n,!0),["ctrl"])],onContextmenu:T(u=>r(t).clickDice(n,!0),["right","prevent"])},{default:k(()=>[n.quantity?(x(),q(Be,{key:0,floating:"",content:n.quantity,color:"primary"},{default:k(()=>[m(U,{icon:n.icon,size:"50"},null,8,["icon"])]),_:2},1032,["content"])):(x(),q(U,{key:1,icon:n.icon,size:"50"},null,8,["icon"]))]),_:2},1032,["size","onClick","onContextmenu"]))),256))]),_:1}),m($e,{ref_key:"rollForm",ref:s},{default:k(()=>[m(j,{"model-value":r(t).computedString,"onUpdate:modelValue":a[3]||(a[3]=n=>r(t).computedString=n),variant:"outlined",readonly:"",placeholder:"F\xF3rmula",class:"mb-2",rules:[l.required(r(t).computedString),l.validate(r(t).computedString),l.maxRoll(r(t).computedString)]},{"append-inner":k(()=>[m(ge,{"model-value":d.value,"onUpdate:modelValue":a[2]||(a[2]=n=>d.value=n),divided:""},{default:k(()=>[m(R,{variant:"outlined",icon:"",size:r(p)?"default":"small",onClick:a[0]||(a[0]=n=>r(t).clickKeepModifiers("kh",d.value))},{default:k(()=>[$(" KH ")]),_:1},8,["size"]),m(R,{variant:"outlined",icon:"",size:r(p)?"default":"small",onClick:a[1]||(a[1]=n=>r(t).clickKeepModifiers("kl",d.value))},{default:k(()=>[$(" KL ")]),_:1},8,["size"])]),_:1},8,["model-value"]),m(R,{icon:"mdi-reload",class:"ml-1",variant:"text",size:r(p)?"default":"small",onClick:y},null,8,["size"])]),_:1},8,["model-value","rules"]),m(j,{"model-value":r(t).adicionais,"onUpdate:modelValue":a[4]||(a[4]=n=>r(t).adicionais=n),variant:"outlined",label:"Adicionais",placeholder:"+12...",rules:[l.input(r(t).adicionais),l.validate(r(t).adicionais),l.maxRoll(r(t).adicionais)],clearable:"","onClick:clear":a[5]||(a[5]=n=>r(t).adicionais="")},null,8,["model-value","rules"]),m(R,{block:"",onClick:c},{default:k(()=>[$("Rolar")]),_:1})]),_:1},512)]),_:1})]),_:1}))}},Ne={__name:"Dice",setup(e){return(t,f)=>(x(),q(we))}};export{Ne as default};
